<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--
    Copyright 2012 The Kuali Foundation

    Licensed under the Educational Community License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

    http://www.opensource.org/licenses/ecl2.php

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<databaseChangeLog xmlns='http://www.liquibase.org/xml/ns/dbchangelog'
	xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
	xsi:schemaLocation='http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd'>

	<changeSet author="RICE20" id="RICE_SERVER_UPDATES_oracle-mod10" dbms="oracle">

	<sql splitStatements="false"><![CDATA[
	    DECLARE
            	PROCEDURE drop_synonyms IS
		    CURSOR synonyms_cursor IS
                        SELECT synonym_name
			FROM all_synonyms
			WHERE owner = 'PUBLIC' AND (substr(synonym_name, 1, 4) = 'KREW' or substr(synonym_name, 1, 4) = 'KRNS' or substr(synonym_name, 1, 4) = 'KRMS');
            BEGIN
                FOR syn IN synonyms_cursor LOOP
                    EXECUTE IMMEDIATE 'DROP PUBLIC SYNONYM ' || syn.synonym_name;
                END LOOP;
            END;
            BEGIN
                drop_synonyms();
	    END;
	]]></sql>		
                
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-07-29-m7.sql
		-- 
		
		
		update KRIM_PERM_T t set NM='Take Requested Approve Action' where PERM_ID = '170'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-07-29.sql
		-- 
		
		
		--
		-- make combo of nm & nmspc_cd unique in all applicable KRMS tables
		-- and drop nmspc_cd where it doesn't make sense
		--
		
		--
		-- break direct fk to krms_cntxt_t from krms_term_rslvr_t & krms_term_spec_t
		--
		
		-- remove cntxt_id from krms_term_rslvr_t, fix unique constraint
		alter table krms_term_rslvr_t drop constraint krms_term_rslvr_tc1
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_term_rslvr_t add constraint krms_term_rslvr_tc1 unique (nm, nmspc_cd)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_term_rslvr_t drop constraint KRMS_TERM_RSLVR_FK2
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_term_rslvr_t drop column cntxt_id
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		-- remove fk from krms_term_spec_t to krms_cntxt_t
		alter table krms_term_spec_t add nmspc_cd varchar2(40) not null
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_term_spec_t drop constraint KRMS_ASSET_FK1
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		drop index KRMS_ASSET_TI1
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_term_spec_t drop constraint krms_asset_tc1
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_term_spec_t add constraint krms_term_spec_tc1 unique (nm, nmspc_cd)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_term_spec_t drop column cntxt_id
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		--
		-- refactor krms_cntxt_term_spec_prereq_t to be a valid term specs table instead
		--
		-- rename krms_cntxt_term_spec_prereq_t to krms_cntxt_vld_term_spec_t
		-- and add prereq column
		alter table krms_cntxt_term_spec_prereq_t drop constraint KRMS_CNTXT_ASSET_PREREQ_FK1
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		drop index krms_cntxt_asset_prereq_ti1
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_cntxt_term_spec_prereq_t drop constraint KRMS_CNTXT_ASSET_PREREQ_FK2
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		drop index krms_cntxt_asset_prereq_ti2
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_cntxt_term_spec_prereq_t rename to krms_cntxt_vld_term_spec_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_cntxt_vld_term_spec_t add prereq varchar2(1) default 'n'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_cntxt_vld_term_spec_t add constraint krms_cntxt_vld_term_spec_ti1 foreign key (cntxt_id) references krms_cntxt_t(cntxt_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_cntxt_vld_term_spec_t add constraint krms_cntxt_vld_term_spec_ti2 foreign key (term_spec_id) references krms_term_spec_t(term_spec_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		--
		-- set up some missing unique constraints
		--
		-- wow, Oracle and MySQL support the same syntax here
		alter table krms_cntxt_t add constraint krms_cntxt_tc1 unique (nm, nmspc_cd)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_func_t add constraint krms_func_tc1 unique (nm, nmspc_cd)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		-- drop namespace code from krms_agenda_t
		alter table krms_agenda_t drop column nmspc_cd
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_agenda_t add constraint krms_agenda_tc1 unique (nm, cntxt_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_typ_t add constraint krms_typ_tc1 unique (nm, nmspc_cd)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_attr_defn_t add constraint krms_attr_defn_tc1 unique (nm, nmspc_cd)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_rule_t add constraint krms_rule_tc1 unique (nm, nmspc_cd)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		--
		-- clean up some crufty index and constraint names
		--
		
		alter table krms_term_rslvr_attr_t drop constraint KRMS_ASSET_RSLVR_ATTR_FK1
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_term_rslvr_attr_t drop constraint KRMS_ASSET_RSLVR_ATTR_FK2
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		drop index krms_asset_rslvr_attr_ti1
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		create index krms_term_rslvr_attr_ti1 on krms_term_rslvr_attr_t (term_rslvr_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		drop index krms_asset_rslvr_attr_ti2
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		create index krms_term_rslvr_attr_ti2 on krms_term_rslvr_attr_t (attr_defn_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_term_rslvr_attr_t add constraint krms_term_rslvr_attr_fk1 foreign key (term_rslvr_id) references krms_term_rslvr_t (term_rslvr_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table krms_term_rslvr_attr_t add constraint krms_term_rslvr_attr_fk2 foreign key (attr_defn_id) references krms_attr_defn_t (attr_defn_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-08-11.sql
		-- 
		
		
		
		
		-- -----------------------------------------------------
		-- Table krew_typ_t
		-- -----------------------------------------------------
		
		CREATE  TABLE krew_typ_t (
		  typ_id VARCHAR2(40) NOT NULL ,
		  nm VARCHAR2(100) NOT NULL ,
		  nmspc_cd VARCHAR2(40) NOT NULL ,
		  srvc_nm VARCHAR2(200) NULL ,
		  actv VARCHAR2(1) DEFAULT 'Y' NOT NULL ,
		  ver_nbr NUMBER(8) DEFAULT 0 NOT NULL ,
		  PRIMARY KEY (typ_id) )
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		CREATE UNIQUE INDEX krew_typ_tc1 ON krew_typ_t (nm, nmspc_cd)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		-- -----------------------------------------------------
		-- Table krew_ppl_flw_t
		-- -----------------------------------------------------
		
		CREATE  TABLE krew_ppl_flw_t (
		  ppl_flw_id VARCHAR2(40) NOT NULL ,
		  nm VARCHAR2(100) NOT NULL ,
		  nmspc_cd VARCHAR2(40) NOT NULL ,
		  typ_id VARCHAR2(40) NOT NULL ,
		  actv VARCHAR2(1) DEFAULT 'Y' NOT NULL ,
		  ver_nbr NUMBER(8) DEFAULT 0 NOT NULL ,
		  desc_txt VARCHAR2(4000) NULL ,
		  PRIMARY KEY (ppl_flw_id) ,
		  CONSTRAINT krew_ppl_flw_fk1
		    FOREIGN KEY (typ_id )
		    REFERENCES krew_typ_t (typ_id ))
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		CREATE UNIQUE INDEX krew_ppl_flw_tc1 ON krew_ppl_flw_t (nm, nmspc_cd)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		-- -----------------------------------------------------
		-- Table krew_attr_defn_t
		-- -----------------------------------------------------
		
		CREATE  TABLE krew_attr_defn_t (
		  attr_defn_id VARCHAR2(40) NOT NULL ,
		  nm VARCHAR2(100) NOT NULL ,
		  nmspc_cd VARCHAR2(40) NOT NULL ,
		  lbl VARCHAR2(40) NULL ,
		  actv VARCHAR2(1) DEFAULT 'Y' NOT NULL ,
		  cmpnt_nm VARCHAR2(100) NULL ,
		  ver_nbr NUMBER(8) DEFAULT 0 NOT NULL ,
		  desc_txt VARCHAR2(40) NULL ,
		  PRIMARY KEY (attr_defn_id) )
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		CREATE UNIQUE INDEX krew_attr_defn_tc1 ON krew_attr_defn_t (nm, nmspc_cd)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		-- -----------------------------------------------------
		-- Table krew_typ_attr_t
		-- -----------------------------------------------------
		
		CREATE  TABLE krew_typ_attr_t (
		  typ_attr_id VARCHAR2(40) NOT NULL ,
		  seq_no NUMBER(5) NOT NULL ,
		  typ_id VARCHAR2(40) NOT NULL ,
		  attr_defn_id VARCHAR2(255) NOT NULL ,
		  actv VARCHAR2(1) DEFAULT 'Y' NOT NULL ,
		  ver_nbr NUMBER(8) DEFAULT 0 NOT NULL ,
		  PRIMARY KEY (typ_attr_id) ,
		  CONSTRAINT krew_typ_attr_fk1
		    FOREIGN KEY (attr_defn_id )
		    REFERENCES krew_attr_defn_t (attr_defn_id ),
		  CONSTRAINT krew_typ_attr_fk2
		    FOREIGN KEY (typ_id )
		    REFERENCES krew_typ_t (typ_id ))
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		CREATE INDEX krew_typ_attr_ti1 ON krew_typ_attr_t (attr_defn_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		CREATE INDEX krew_typ_attr_ti2 ON krew_typ_attr_t (typ_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		CREATE UNIQUE INDEX krew_typ_attr_tc1 ON krew_typ_attr_t (typ_id, attr_defn_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		-- -----------------------------------------------------
		-- Table krew_ppl_flw_mbr_t
		-- -----------------------------------------------------
		
		CREATE  TABLE krew_ppl_flw_mbr_t (
		  ppl_flw_mbr_id VARCHAR2(40) NOT NULL ,
		  ppl_flw_id VARCHAR2(40) NOT NULL ,
		  mbr_typ_cd VARCHAR2(1) NOT NULL ,
		  mbr_id VARCHAR2(40) NOT NULL ,
		  prio NUMBER(8) NULL ,
		  dlgt_frm_id VARCHAR2(40) NULL ,
		  ver_nbr NUMBER(8) DEFAULT 0 NOT NULL ,
		  PRIMARY KEY (ppl_flw_mbr_id) ,
		  CONSTRAINT krew_ppl_flw_mbr_fk1
		    FOREIGN KEY (ppl_flw_id )
		    REFERENCES krew_ppl_flw_t (ppl_flw_id ),
		  CONSTRAINT krew_ppl_flw_mbr_fk2
		    FOREIGN KEY (dlgt_frm_id )
		    REFERENCES krew_ppl_flw_mbr_t (ppl_flw_mbr_id ))
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		CREATE INDEX krew_ppl_flw_mbr_ti1 ON krew_ppl_flw_mbr_t (ppl_flw_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		CREATE INDEX krew_ppl_flw_mbr_ti2 ON krew_ppl_flw_mbr_t (ppl_flw_id, prio)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		CREATE UNIQUE INDEX krew_ppl_flw_mbr_tc1 ON krew_ppl_flw_mbr_t (ppl_flw_id, mbr_typ_cd, mbr_id, dlgt_frm_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		CREATE INDEX krew_ppl_flw_mbr_ti3 ON krew_ppl_flw_mbr_t (dlgt_frm_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		-- -----------------------------------------------------
		-- Table krew_ppl_flw_attr_t
		-- -----------------------------------------------------
		
		CREATE  TABLE krew_ppl_flw_attr_t (
		  ppl_flw_attr_id VARCHAR2(40) NOT NULL ,
		  ppl_flw_id VARCHAR2(40) NOT NULL ,
		  attr_defn_id VARCHAR2(40) NOT NULL ,
		  attr_val VARCHAR2(400) NULL ,
		  ver_nbr NUMBER(8) DEFAULT 0 NOT NULL ,
		  PRIMARY KEY (ppl_flw_attr_id) ,
		  CONSTRAINT krew_ppl_flw_attr_fk1
		    FOREIGN KEY (ppl_flw_id )
		    REFERENCES krew_ppl_flw_t (ppl_flw_id ),
		  CONSTRAINT krew_ppl_flw_attr_fk2
		    FOREIGN KEY (attr_defn_id )
		    REFERENCES krew_attr_defn_t (attr_defn_id ))
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		CREATE INDEX krew_ppl_flw_attr_ti1 ON krew_ppl_flw_attr_t (ppl_flw_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		CREATE INDEX krew_ppl_flw_attr_ti2 ON krew_ppl_flw_attr_t (attr_defn_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		-- -----------------------------------------------------
		-- Table krew_typ_s
		-- -----------------------------------------------------
		CREATE SEQUENCE krew_typ_s INCREMENT BY 1 START WITH 10000 NOMAXVALUE NOCYCLE NOCACHE ORDER
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		-- -----------------------------------------------------
		-- Table krew_typ_attr_s
		-- -----------------------------------------------------
		CREATE SEQUENCE krew_typ_attr_s INCREMENT BY 1 START WITH 10000 NOMAXVALUE NOCYCLE NOCACHE ORDER
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		-- -----------------------------------------------------
		-- Table krew_attr_defn_s
		-- -----------------------------------------------------
		CREATE SEQUENCE krew_attr_defn_s INCREMENT BY 1 START WITH 10000 NOMAXVALUE NOCYCLE NOCACHE ORDER
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		-- -----------------------------------------------------
		-- Table krew_ppl_flw_s
		-- -----------------------------------------------------
		CREATE SEQUENCE krew_ppl_flw_s INCREMENT BY 1 START WITH 10000 NOMAXVALUE NOCYCLE NOCACHE ORDER
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		-- -----------------------------------------------------
		-- Table krew_ppl_flw_attr_s
		-- -----------------------------------------------------
		CREATE SEQUENCE krew_ppl_flw_attr_s INCREMENT BY 1 START WITH 10000 NOMAXVALUE NOCYCLE NOCACHE ORDER
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		-- -----------------------------------------------------
		-- Table krew_ppl_flw_mbr_s
		-- -----------------------------------------------------
		CREATE SEQUENCE krew_ppl_flw_mbr_s INCREMENT BY 1 START WITH 10000 NOMAXVALUE NOCYCLE NOCACHE ORDER
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-08-17.sql
		-- 
		
		
		delete from krcr_parm_t
		where nmspc_cd = 'KR-NS'
		and cmpnt_cd = 'All'
		and parm_nm in ('STRING_TO_DATE_FORMATS', 'STRING_TO_TIMESTAMP_FORMATS', 'TIMESTAMP_TO_STRING_FORMAT_FOR_USER_INTERFACE', 'DATE_TO_STRING_FORMAT_FOR_FILE_NAME', 'TIMESTAMP_TO_STRING_FORMAT_FOR_FILE_NAME')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-08-29.sql
		-- 
		
		
		delete from krcr_parm_t where PARM_NM = 'CACHING_IND'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-09-07.sql
		-- 
		
		
		-- KULRICE-5360 rename KIM entity fields
		alter table KRIM_ENTITY_NM_T rename column TITLE_NM to PREFIX_NM
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		alter table KRIM_ENTITY_BIO_T rename column BIRTH_STATE_CD to BIRTH_STATE_PVC_CD
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		alter table KRIM_ENTITY_ADDR_T rename column POSTAL_STATE_CD to STATE_PVC_CD
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_ENTITY_ADDR_T rename column CITY_NM to CITY
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		alter table KRIM_PND_NM_MT rename column TITLE_NM to PREFIX_NM
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_PND_ADDR_MT rename column POSTAL_STATE_CD to STATE_PVC_CD
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_PND_ADDR_MT rename column CITY_NM to CITY
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-09-15.sql
		-- 
		
		
		delete from KREW_USR_OPTN_T where PRSN_OPTN_ID like 'DocSearch%'
		]]></sql>

                <sql splitStatements="false"><![CDATA[
		alter table KRIM_ENTITY_NM_T add NOTE_MSG VARCHAR(1024)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_ENTITY_NM_T add NM_CHNG_DT DATE
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		alter table KRIM_ENTITY_ADDR_T add ATTN_LINE VARCHAR(45)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_ENTITY_ADDR_T add ADDR_FMT VARCHAR(256)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_ENTITY_ADDR_T add MOD_DT DATE DEFAULT SYSDATE
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_ENTITY_ADDR_T add VALID_DT DATE
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_ENTITY_ADDR_T add VALID_IND VARCHAR(1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_ENTITY_ADDR_T add NOTE_MSG VARCHAR(1024)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		alter table KRIM_ENTITY_BIO_T add NOTE_MSG VARCHAR(1024)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_ENTITY_BIO_T add GNDR_CHG_CD VARCHAR(20)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_PND_NM_MT add NOTE_MSG VARCHAR(1024)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_PND_NM_MT add NM_CHNG_DT DATE
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		alter table KRIM_PND_ADDR_MT add ATTN_LINE VARCHAR(45)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_PND_ADDR_MT add ADDR_FMT VARCHAR(256)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_PND_ADDR_MT add MOD_DT DATE DEFAULT SYSDATE
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_PND_ADDR_MT add VALID_DT DATE
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_PND_ADDR_MT add VALID_IND VARCHAR(1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KRIM_PND_ADDR_MT add NOTE_MSG VARCHAR(1024)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-09-18.sql
		-- 
		
		
		alter table KREW_PPL_FLW_T modify(TYP_ID NULL)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		DECLARE
		c NUMBER;
		BEGIN
		select count(*) into c from all_constraints where CONSTRAINT_NAME = 'KREW_PPL_FLW_MBR_TC1' ;
		IF c>0 THEN
		EXECUTE IMMEDIATE 'ALTER TABLE KREW_PPL_FLW_MBR_T DROP CONSTRAINT KREW_PPL_FLW_MBR_TC1';
		ELSE
		DBMS_OUTPUT.PUT_LINE('KREW_PPL_FLW_MBR_TC1 does not exist, so not running statement to change/drop it.');
		END IF;
		END;
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KREW_PPL_FLW_MBR_T DROP COLUMN dlgt_frm_id
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		-- -----------------------------------------------------
		-- Table krew_ppl_flw_dlgt_t
		-- -----------------------------------------------------
		
		CREATE  TABLE krew_ppl_flw_dlgt_t (
		  ppl_flw_dlgt_id VARCHAR2(40) NOT NULL ,
		  ppl_flw_mbr_id VARCHAR2(40) NOT NULL ,
		  mbr_id VARCHAR2(40) NOT NULL ,
		  mbr_typ_cd VARCHAR2(1) NOT NULL ,
		  dlgn_typ_cd VARCHAR2(1) NOT NULL ,
		  ver_nbr NUMBER(8) DEFAULT 0 NOT NULL ,
		  PRIMARY KEY (ppl_flw_dlgt_id) ,
		  CONSTRAINT krew_ppl_flw_dlgt_fk1
		    FOREIGN KEY (ppl_flw_mbr_id )
		    REFERENCES krew_ppl_flw_mbr_t (ppl_flw_mbr_id ))
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		CREATE INDEX krew_ppl_flw_dlgt_ti1 ON krew_ppl_flw_dlgt_t (ppl_flw_mbr_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		CREATE SEQUENCE krew_ppl_flw_dlgt_s INCREMENT BY 1 START WITH 10000 NOMAXVALUE NOCYCLE NOCACHE ORDER
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-09-26b.sql
		-- 
		
		
		-- KIM permissions
		insert into krcr_nmspc_t
		(nmspc_cd, nm, actv_ind, appl_id, ver_nbr, obj_id)
		values ('KR-RULE','Kuali Rules','Y','RICE',1,sys_guid())
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		insert into krim_perm_tmpl_t
		(perm_tmpl_id, nm, nmspc_cd, desc_txt, kim_typ_id, actv_ind, ver_nbr, obj_id)
		values ('RICE_KRMS_1',
		        'KRMS Agenda Permission','KR-RULE','View/Maintain Agenda',
		        (select kim_typ_id from krim_typ_t where nm = 'Namespace' and nmspc_cd = 'KR-NS'),
		        'Y',1,sys_guid())
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		insert into krim_perm_t
		(perm_id, perm_tmpl_id, nmspc_cd, nm, desc_txt, actv_ind, ver_nbr, obj_id)
		values ('RICE_KRMS_2',
		        (select perm_tmpl_id from krim_perm_tmpl_t where nm = 'KRMS Agenda Permission' and nmspc_cd = 'KR-RULE'),
		        'KR-RULE','Maintain KRMS Agenda','Allows creation and modification of agendas via the agenda editor','Y',1,sys_guid())
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		insert into krim_perm_attr_data_t
		(attr_data_id, perm_id, kim_typ_id, kim_attr_defn_id, attr_val, ver_nbr, obj_id)
		values ('RICE_KRMS_3',
		        (select perm_id from krim_perm_t where nm = 'Maintain KRMS Agenda' and nmspc_cd = 'KR-RULE'),
		        (select kim_typ_id from krim_typ_t where nm = 'Namespace' and nmspc_cd = 'KR-NS'),
		        (select kim_attr_defn_id from krim_attr_defn_t where nm = 'namespaceCode'),
		        'KRMS_TEST',1,sys_guid())
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		-- KIM roles
		insert into krim_role_t
		(role_id, role_nm, nmspc_cd, desc_txt, kim_typ_id, actv_ind, last_updt_dt, obj_id)
		values ('RICE_KRMS_4',
		        'Kuali Rules Management System Administrator',
		        'KR-RULE',
		        'This role maintains KRMS agendas and rules.',
		        (select kim_typ_id from krim_typ_t where nm = 'Default' and nmspc_cd = 'KUALI'),
		        'Y', current_date, sys_guid())
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		insert into krim_role_mbr_t
		(role_mbr_id, role_id, mbr_id, mbr_typ_cd, last_updt_dt, ver_nbr, obj_id)
		values ('RICE_KRMS_5',
		        (select role_id from krim_role_t where role_nm = 'Kuali Rules Management System Administrator' and nmspc_cd = 'KR-RULE'),
		        (select prncpl_id from krim_prncpl_t where prncpl_nm = 'admin'),
		        'P', current_date, 1, sys_guid())
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		insert into krim_role_perm_t
		(role_perm_id, role_id, perm_id, actv_ind, ver_nbr, obj_id)
		values ('RICE_KRMS_6',
		        (select role_id from krim_role_t where role_nm = 'Kuali Rules Management System Administrator' and nmspc_cd = 'KR-RULE'),
		        (select perm_id from krim_perm_t where nm = 'Maintain KRMS Agenda' and nmspc_cd = 'KR-RULE'),
		        'Y', 1, sys_guid())
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		-- 
		-- 2011-09-26.sql
		-- 
		
		
		ALTER TABLE KREW_DOC_TYP_T DROP COLUMN CSTM_ACTN_LIST_ATTRIB_CLS_NM
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		ALTER TABLE KREW_DOC_TYP_T DROP COLUMN CSTM_ACTN_EMAIL_ATTRIB_CLS_NM
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		ALTER TABLE KREW_DOC_TYP_T DROP COLUMN CSTM_DOC_NTE_ATTRIB_CLS_NM
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-09-27.sql
		-- 
		
		
		-- Notification PeopleFlowActionType
		
		insert into krms_typ_t
		(typ_id, nm, nmspc_cd, srvc_nm, actv, ver_nbr)
		values ('1000', 'notificationPeopleFlowActionType', 'KRMS', 'notificationPeopleFlowActionTypeService', 'Y', 1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		-- Approval PeopleFlowActionType
		
		insert into krms_typ_t
		(typ_id, nm, nmspc_cd, srvc_nm, actv, ver_nbr)
		values ('1001', 'approvalPeopleFlowActionType', 'KRMS_TEST', 'approvalPeopleFlowActionTypeService', 'Y', 1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-09-30.sql
		-- 
		
		
		
		
		-- -----------------------------------------------------
		-- Table krms_cntxt_vld_agenda_t
		-- -----------------------------------------------------
		-- begin execute immediate 'drop table krms_cntxt_vld_agenda_t'; exception when others then null; end;
		
		CREATE  TABLE  krms_cntxt_vld_agenda_t (
		  cntxt_vld_agenda_id VARCHAR2(40)  NOT NULL ,
		  cntxt_id VARCHAR2(40)  NOT NULL ,
		  agenda_typ_id VARCHAR2(40)  NOT NULL ,
		  ver_nbr NUMBER(8) DEFAULT 0  NOT NULL ,
		  PRIMARY KEY (cntxt_vld_agenda_id) ,
		  -- CREATE INDEX krms_cntxt_vld_agenda_ti1 (cntxt_id ASC) ,
		  CONSTRAINT krms_cntxt_vld_agenda_fk1
		    FOREIGN KEY (cntxt_id )
		    REFERENCES krms_cntxt_t (cntxt_id ) )
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		CREATE INDEX krms_cntxt_vld_agenda_ti1 on krms_cntxt_vld_agenda_t (cntxt_id ASC)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		CREATE SEQUENCE krms_cntxt_vld_agenda_s INCREMENT BY 1 START WITH 10000 NOMAXVALUE NOCYCLE NOCACHE ORDER
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-10-03.sql
		-- 
		
		
		alter table KREW_PPL_FLW_MBR_T add ACTN_RQST_PLCY_CD VARCHAR2(1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KREW_PPL_FLW_MBR_T add RSP_ID VARCHAR2(40) NOT NULL
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KREW_PPL_FLW_DLGT_T add ACTN_RQST_PLCY_CD VARCHAR2(1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		alter table KREW_PPL_FLW_DLGT_T add RSP_ID VARCHAR2(40) NOT NULL
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-10-21.sql
		-- 
		
		
		-- KULRICE-5348
		ALTER TABLE KREW_RULE_T RENAME COLUMN PREV_RULE_VER_NBR TO PREV_VER_RULE_ID
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		-- KULRICE-4589
		UPDATE KRCR_PARM_T
		SET PARM_NM='NOTIFY_GROUPS',
		    PARM_DESC_TXT='Defines a group name (in the format "namespace:name") which contains members who should never receive "notifications" action requests from KEW.',
		    EVAL_OPRTR_CD='D'
		WHERE NMSPC_CD = 'KR-WKFLW'
		  AND CMPNT_CD = 'Notification'
		  AND PARM_NM = 'NOTIFY_EXCLUDED_USERS_IND'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-10-23.sql
		-- 
		
		
		alter table krcr_cmpnt_t add cmpnt_set_id varchar2(40)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		create table krcr_cmpnt_set_t (
		  cmpnt_set_id varchar2(40) not null,
		  last_updt_ts date not null,
		  chksm varchar2(40) not null,
		  ver_nbr number(8) default 0 not null,
		  primary key (cmpnt_set_id) )
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-10-24.sql
		-- 
		
		
		alter table krcr_cmpnt_t drop column cmpnt_set_id
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		create table krcr_drvd_cmpnt_t (
		  nmspc_cd varchar2(20) not null,
		  cmpnt_cd varchar2(100) not null,
		  nm varchar2(255),
		  cmpnt_set_id varchar2(40) not null,
		  primary key (nmspc_cd, cmpnt_cd))
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-10-25.sql
		-- 
		
		
		update KREW_RULE_ATTR_T set RULE_ATTR_TYP_CD='DocumentSecurityAttribute' where RULE_ATTR_TYP_CD='DocumentSearchSecurityFilterAttribute'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		update KRCR_PARM_T set CMPNT_CD='DocumentSearch' where CMPNT_CD='DocSearchCriteriaDTO'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		insert into KRCR_CMPNT_T (NMSPC_CD, CMPNT_CD, NM, ACTV_IND, OBJ_ID, VER_NBR)
		values ('KR-WKFLW', 'DocumentSearch', 'Document Search', 'Y', sys_guid(), 1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-10-26.sql
		-- 
		
		
		insert into KRCR_CMPNT_T (NMSPC_CD, CMPNT_CD, NM, ACTV_IND, OBJ_ID, VER_NBR)
		VALUES ('KR-WKFLW', 'Rule', 'Rule', 'Y', sys_guid(), 1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		update KRCR_CMPNT_T set cmpnt_cd='EDocLite' where cmpnt_cd like 'EDocLite%'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-10-27.sql
		-- 
		
		
		-- create a KIM permission for the Cache Administrator screen/controller
		
		insert into krim_perm_t
		(perm_id, perm_tmpl_id, nmspc_cd, nm, desc_txt, actv_ind, ver_nbr, obj_id)
		values ('RICE_20_1',
		        (select perm_tmpl_id from krim_perm_tmpl_t where nm = 'Use Screen' and nmspc_cd = 'KR-NS'),
		        'KR-SYS','Use Cache Adminstration Screen','Allows use of the cache administration screen','Y',1,sys_guid())
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		insert into krim_perm_attr_data_t
		(attr_data_id, perm_id, kim_typ_id, kim_attr_defn_id, attr_val, ver_nbr, obj_id)
		values ('RICE_20_2',
		        (select perm_id from krim_perm_t where nm = 'Use Cache Adminstration Screen' and nmspc_cd = 'KR-SYS'),
		        (select kim_typ_id from krim_typ_t where nm = 'Namespace or Action' and nmspc_cd = 'KR-NS'),
		        (select kim_attr_defn_id from krim_attr_defn_t where nm = 'actionClass'),
		        'org.kuali.rice.core.web.cache.CacheAdminController',1,sys_guid())
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		insert into krim_role_perm_t
		(role_perm_id, role_id, perm_id, actv_ind, ver_nbr, obj_id)
		values ('RICE_20_3',
		        (select role_id from krim_role_t where role_nm = 'Technical Administrator' and nmspc_cd = 'KR-SYS'),
		        (select perm_id from krim_perm_t where nm = 'Use Cache Adminstration Screen' and nmspc_cd = 'KR-SYS'),
		        'Y', 1, sys_guid())
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-11-03.sql
		-- 
		
		
		-- Make typ_id column optional where appropriate
		
		ALTER TABLE krms_rule_t MODIFY typ_id varchar2(40) null
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		ALTER TABLE krms_agenda_t MODIFY typ_id varchar2(40) null
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		ALTER TABLE krms_cntxt_t MODIFY typ_id varchar2(40) null
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-11-14.sql
		-- 
		
		
		-- Drop foreign key constraint on krms_prop_t table
		alter table KRMS_PROP_T drop constraint KRMS_PROP_FK1
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-11-23.sql
		-- 
		
		
		-- give PeopleFlows friendlier names
		
		update krms_typ_t set nm='Notify PeopleFlow' where typ_id = '1000'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		update krms_typ_t set nm='Route to PeopleFlow' where typ_id = '1001'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		-- remove constraint that is preventing compound props from persisting
		
		alter table krms_cmpnd_prop_props_t modify seq_no NUMBER(5) null
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-11-28.sql
		-- 
		
		
		update krim_perm_t
		   set nmspc_cd = 'KRMS_TEST'
		 where nm = 'Maintain KRMS Agenda'
		   and nmspc_cd = 'KR-RULE'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		delete from krim_perm_attr_data_t
		 where perm_id = (select perm_id from krim_perm_t where nm = 'Maintain KRMS Agenda' and nmspc_cd = 'KRMS_TEST')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-11-29.sql
		-- 
		
		
		alter table KREW_RTE_NODE_T modify ACTVN_TYP varchar(1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-12-07.sql
		-- 
		
		
		
		-- correct fields in krms test data
		update krms_prop_t set cmpnd_op_cd = '&' where cmpnd_op_cd = 'a'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		update krms_cmpnd_prop_props_t set seq_no = '2' where prop_id = 'P421C'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		update krms_cmpnd_prop_props_t set seq_no = '3' where prop_id = 'P421D'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		update krms_cmpnd_prop_props_t set seq_no = '3' where prop_id = 'P502C'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		-- move seq_no column from krms_cmpnd_prop_props_t pivot table to krms_prop_t table.
		alter table krms_prop_t add (cmpnd_seq_no decimal(5,0) default null)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		update krms_prop_t set krms_prop_t.cmpnd_seq_no = (select seq_no from krms_cmpnd_prop_props_t where prop_id = krms_prop_t.prop_id)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		alter table krms_cmpnd_prop_props_t drop (seq_no)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2011-12-21.sql
		-- 
		
		
		UPDATE KRCR_NMSPC_T SET APPL_ID = NULL WHERE NMSPC_CD = 'KUALI'
		]]></sql>

		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRCR_NMSPC_T VALUES ('KR-KRAD', sys_guid(), 1, 'Kuali Rapid Application Development', 'Y', 'RICE')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_ATTR_DEFN_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_ATTR_DEFN_ID, '[^0-9]', ''))) + 1) from KRIM_ATTR_DEFN_T where KIM_ATTR_DEFN_ID is not NULL and REGEXP_LIKE(KIM_ATTR_DEFN_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_ATTR_DEFN_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'viewId', null, 'Y', 'KR-KRAD', 'org.kuali.rice.kim.bo.impl.KimAttributes')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_ATTR_DEFN_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_ATTR_DEFN_ID, '[^0-9]', ''))) + 1) from KRIM_ATTR_DEFN_T where KIM_ATTR_DEFN_ID is not NULL and REGEXP_LIKE(KIM_ATTR_DEFN_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_ATTR_DEFN_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'actionEvent', null, 'Y', 'KR-KRAD', 'org.kuali.rice.kim.bo.impl.KimAttributes')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_ATTR_DEFN_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_ATTR_DEFN_ID, '[^0-9]', ''))) + 1) from KRIM_ATTR_DEFN_T where KIM_ATTR_DEFN_ID is not NULL and REGEXP_LIKE(KIM_ATTR_DEFN_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_ATTR_DEFN_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'collectionPropertyName', null, 'Y', 'KR-KRAD', 'org.kuali.rice.kim.bo.impl.KimAttributes')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_ATTR_DEFN_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_ATTR_DEFN_ID, '[^0-9]', ''))) + 1) from KRIM_ATTR_DEFN_T where KIM_ATTR_DEFN_ID is not NULL and REGEXP_LIKE(KIM_ATTR_DEFN_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_ATTR_DEFN_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'fieldId', null, 'Y', 'KR-KRAD', 'org.kuali.rice.kim.bo.impl.KimAttributes')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_ATTR_DEFN_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_ATTR_DEFN_ID, '[^0-9]', ''))) + 1) from KRIM_ATTR_DEFN_T where KIM_ATTR_DEFN_ID is not NULL and REGEXP_LIKE(KIM_ATTR_DEFN_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_ATTR_DEFN_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'groupId', null, 'Y', 'KR-KRAD', 'org.kuali.rice.kim.bo.impl.KimAttributes')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_ATTR_DEFN_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_ATTR_DEFN_ID, '[^0-9]', ''))) + 1) from KRIM_ATTR_DEFN_T where KIM_ATTR_DEFN_ID is not NULL and REGEXP_LIKE(KIM_ATTR_DEFN_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_ATTR_DEFN_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'widgetId', null, 'Y', 'KR-KRAD', 'org.kuali.rice.kim.bo.impl.KimAttributes')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_ATTR_DEFN_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_ATTR_DEFN_ID, '[^0-9]', ''))) + 1) from KRIM_ATTR_DEFN_T where KIM_ATTR_DEFN_ID is not NULL and REGEXP_LIKE(KIM_ATTR_DEFN_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_ATTR_DEFN_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'actionId', null, 'Y', 'KR-KRAD', 'org.kuali.rice.kim.bo.impl.KimAttributes')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(kim_typ_id, '[^0-9]', ''))) + 1) from KRIM_TYP_T where kim_typ_id is not NULL and REGEXP_LIKE(kim_typ_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(kim_typ_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'View', 'viewPermissionTypeService', 'Y', 'KR-KRAD')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(kim_typ_id, '[^0-9]', ''))) + 1) from KRIM_TYP_T where kim_typ_id is not NULL and REGEXP_LIKE(kim_typ_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(kim_typ_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'View Edit Mode', 'viewEditModePermissionTypeService', 'Y', 'KR-KRAD')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(kim_typ_id, '[^0-9]', ''))) + 1) from KRIM_TYP_T where kim_typ_id is not NULL and REGEXP_LIKE(kim_typ_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(kim_typ_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'View Field', 'viewFieldPermissionTypeService', 'Y', 'KR-KRAD')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(kim_typ_id, '[^0-9]', ''))) + 1) from KRIM_TYP_T where kim_typ_id is not NULL and REGEXP_LIKE(kim_typ_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(kim_typ_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'View Group', 'viewGroupPermissionTypeService', 'Y', 'KR-KRAD')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(kim_typ_id, '[^0-9]', ''))) + 1) from KRIM_TYP_T where kim_typ_id is not NULL and REGEXP_LIKE(kim_typ_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(kim_typ_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'View Widget', 'viewWidgetPermissionTypeService', 'Y', 'KR-KRAD')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(kim_typ_id, '[^0-9]', ''))) + 1) from KRIM_TYP_T where kim_typ_id is not NULL and REGEXP_LIKE(kim_typ_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(kim_typ_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'View Action', 'viewActionPermissionTypeService', 'Y', 'KR-KRAD')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(kim_typ_id, '[^0-9]', ''))) + 1) from KRIM_TYP_T where kim_typ_id is not NULL and REGEXP_LIKE(kim_typ_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(kim_typ_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'View Line Field', 'viewLineFieldPermissionTypeService', 'Y', 'KR-KRAD')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(kim_typ_id, '[^0-9]', ''))) + 1) from KRIM_TYP_T where kim_typ_id is not NULL and REGEXP_LIKE(kim_typ_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(kim_typ_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'View Line Action', 'viewLineActionPermissionTypeService', 'Y', 'KR-KRAD')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'a', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='viewId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'a', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Edit Mode'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='viewId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'b', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Edit Mode'), '10', 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'a', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Field'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='viewId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'b', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Field'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='fieldId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'c', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Field'), '6', 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'a', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Group'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='viewId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'b', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Group'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='groupId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'c', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Group'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='fieldId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'a', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Widget'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='viewId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'b', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Widget'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='widgetId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'a', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Action'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='viewId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'b', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Action'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='actionId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'c', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Action'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='actionEvent'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'a', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Line Field'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='viewId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'b', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Line Field'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='groupId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'c', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Line Field'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='collectionPropertyName'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'd', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Line Field'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='fieldId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'e', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Line Field'), '6', 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'a', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Line Action'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='viewId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'b', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Line Action'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='groupId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'c', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Line Action'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='collectionPropertyName'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'd', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Line Action'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='actionId'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'e', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Line Action'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-KRAD' and NM='actionEvent'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_PERM_TMPL_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', ''))) + 1) from krim_perm_tmpl_t where perm_tmpl_id is not NULL and REGEXP_LIKE(perm_tmpl_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'KR-KRAD', 'Open View', null, (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_PERM_TMPL_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', ''))) + 1) from krim_perm_tmpl_t where perm_tmpl_id is not NULL and REGEXP_LIKE(perm_tmpl_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'KR-KRAD', 'Edit View', null, (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_PERM_TMPL_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', ''))) + 1) from krim_perm_tmpl_t where perm_tmpl_id is not NULL and REGEXP_LIKE(perm_tmpl_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'KR-KRAD', 'Use View', null, (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Edit Mode'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_PERM_TMPL_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', ''))) + 1) from krim_perm_tmpl_t where perm_tmpl_id is not NULL and REGEXP_LIKE(perm_tmpl_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'KR-KRAD', 'View Field', null, (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Field'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_PERM_TMPL_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', ''))) + 1) from krim_perm_tmpl_t where perm_tmpl_id is not NULL and REGEXP_LIKE(perm_tmpl_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'KR-KRAD', 'Edit Field', null, (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Field'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_PERM_TMPL_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', ''))) + 1) from krim_perm_tmpl_t where perm_tmpl_id is not NULL and REGEXP_LIKE(perm_tmpl_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'KR-KRAD', 'View Group', null, (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Group'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_PERM_TMPL_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', ''))) + 1) from krim_perm_tmpl_t where perm_tmpl_id is not NULL and REGEXP_LIKE(perm_tmpl_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'KR-KRAD', 'Edit Group', null, (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Group'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_PERM_TMPL_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', ''))) + 1) from krim_perm_tmpl_t where perm_tmpl_id is not NULL and REGEXP_LIKE(perm_tmpl_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'KR-KRAD', 'View Widget', null, (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Widget'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_PERM_TMPL_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', ''))) + 1) from krim_perm_tmpl_t where perm_tmpl_id is not NULL and REGEXP_LIKE(perm_tmpl_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'KR-KRAD', 'Edit Widget', null, (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Widget'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_PERM_TMPL_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', ''))) + 1) from krim_perm_tmpl_t where perm_tmpl_id is not NULL and REGEXP_LIKE(perm_tmpl_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'KR-KRAD', 'Perform Action', null, (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Action'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_PERM_TMPL_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', ''))) + 1) from krim_perm_tmpl_t where perm_tmpl_id is not NULL and REGEXP_LIKE(perm_tmpl_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'KR-KRAD', 'View Line', null, (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Group'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_PERM_TMPL_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', ''))) + 1) from krim_perm_tmpl_t where perm_tmpl_id is not NULL and REGEXP_LIKE(perm_tmpl_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'KR-KRAD', 'Edit Line', null, (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Group'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_PERM_TMPL_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', ''))) + 1) from krim_perm_tmpl_t where perm_tmpl_id is not NULL and REGEXP_LIKE(perm_tmpl_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'KR-KRAD', 'View Line Field', null, (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Line Field'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_PERM_TMPL_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', ''))) + 1) from krim_perm_tmpl_t where perm_tmpl_id is not NULL and REGEXP_LIKE(perm_tmpl_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'KR-KRAD', 'Edit Line Field', null, (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Line Field'), 'Y')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRIM_PERM_TMPL_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', ''))) + 1) from krim_perm_tmpl_t where perm_tmpl_id is not NULL and REGEXP_LIKE(perm_tmpl_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'KR-KRAD', 'Perform Line Action', null, (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-KRAD' and NM='View Line Action'), 'Y')
		]]></sql>
		
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2012-01-04.sql
		-- 
		
		
		update KRMS_TERM_SPEC_T set TYP = 'java.lang.String' where TYP = 'T2'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
			
		update KRMS_TERM_SPEC_T set TYP = 'java.lang.String' where TYP = 'T1'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		update KRMS_TERM_SPEC_T set TYP = 'java.lang.Integer' where TYP = 'T6'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2012-01-05.sql
		-- 
		
		
		ALTER TABLE KRMS_CNTXT_VLD_ACTN_T RENAME CONSTRAINT KRMS_CNTXT_VLD_ACTN_FK1 TO KRMS_CNTXT_VLD_ACTN_TYP_FK1
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		ALTER INDEX KRMS_CNTXT_VLD_ACTN_TI1 RENAME TO KRMS_CNTXT_VLD_ACTN_TYP_TI1
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		RENAME KRMS_CNTXT_VLD_ACTN_S TO KRMS_CNTXT_VLD_ACTN_TYP_S
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		ALTER TABLE KRMS_CNTXT_VLD_ACTN_T RENAME TO KRMS_CNTXT_VLD_ACTN_TYP_T
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		ALTER TABLE KRMS_CNTXT_VLD_AGENDA_T RENAME CONSTRAINT KRMS_CNTXT_VLD_AGENDA_FK1 TO KRMS_CNTXT_VLD_AGENDA_TYP_FK1
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		ALTER INDEX KRMS_CNTXT_VLD_AGENDA_TI1 RENAME TO KRMS_CNTXT_VLD_AGENDA_TYP_TI1
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		RENAME KRMS_CNTXT_VLD_AGENDA_S TO KRMS_CNTXT_VLD_AGENDA_TYP_S
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		ALTER TABLE KRMS_CNTXT_VLD_AGENDA_T RENAME TO KRMS_CNTXT_VLD_AGENDA_TYP_T
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		ALTER TABLE KRMS_CNTXT_VLD_RULE_T RENAME CONSTRAINT KRMS_CNTXT_VLD_RULE_FK1 TO KRMS_CNTXT_VLD_RULE_TYP_FK1
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		ALTER INDEX KRMS_CNTXT_VLD_RULE_TI1 RENAME TO KRMS_CNTXT_VLD_RULE_TYP_TI1
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		RENAME KRMS_CNTXT_VLD_RULE_S TO KRMS_CNTXT_VLD_RULE_TYP_S
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		ALTER TABLE KRMS_CNTXT_VLD_RULE_T RENAME TO KRMS_CNTXT_VLD_RULE_TYP_T
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		ALTER TABLE KRMS_CNTXT_VLD_RULE_TYP_T RENAME COLUMN RULE_ID TO RULE_TYP_ID
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		UPDATE KRMS_AGENDA_T SET TYP_ID = NULL WHERE TYP_ID = 'T5'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		UPDATE KRMS_RULE_T SET TYP_ID = NULL
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		DELETE FROM KRMS_CNTXT_VLD_RULE_TYP_T
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2012-01-06.sql
		-- 
		
		
		-- KULRICE-6299: New DB index to improve action list performance
		create index KREW_ACTN_ITM_TI6 on KREW_ACTN_ITM_T (DLGN_TYP, DLGN_PRNCPL_ID, DLGN_GRP_ID)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2012-01-11.sql
		-- 
		
		
		-- KULRICE-6452
		
		drop table krms_cntxt_vld_event_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		drop sequence krms_cntxt_vld_event_s
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		rename krms_cntxt_term_spec_prereq_s to krms_cntxt_vld_term_spec_s
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2012-01-18.sql
		-- 
		
		
		alter table KREW_DOC_HDR_T drop column RTE_LVL_MDFN_DT
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2012-01-19b.sql
		-- 
		
		
		
		--
		-- KULRICE-5856: KRNS_DOC_HDR_T.FDOC_DESC column is only 40 char
		--
		
		ALTER TABLE KRNS_DOC_HDR_T MODIFY (FDOC_DESC varchar2(255))
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		--
		-- KULRICE-6463: New DB Indexes for KIM Permission checks
		--
		
		CREATE INDEX KRIM_ROLE_PERM_TI2 ON KRIM_ROLE_PERM_T (PERM_ID, ACTV_IND)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		CREATE INDEX KRIM_PERM_TI1 ON KRIM_PERM_T (PERM_TMPL_ID)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		CREATE INDEX KRIM_PERM_TI2 ON KRIM_PERM_T (PERM_TMPL_ID, ACTV_IND)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		CREATE INDEX KRIM_PERM_TMPL_TI1 ON KRIM_PERM_TMPL_T (NMSPC_CD, NM)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		CREATE INDEX KRIM_ROLE_MBR_TI2 ON KRIM_ROLE_MBR_T (role_id, mbr_id, mbr_typ_cd)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		CREATE INDEX KRIM_ROLE_MBR_TI3 ON KRIM_ROLE_MBR_T (mbr_id, mbr_typ_cd)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		--
		-- KRMS Sample (and production) Data
		--
		
		---- If you should want to clean out your KRMS tables:
		delete from  krms_cntxt_vld_rule_typ_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_cntxt_vld_func_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_term_spec_ctgry_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_func_ctgry_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_ctgry_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_func_parm_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_func_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_term_parm_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_term_rslvr_parm_spec_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_term_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_cntxt_vld_term_spec_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_term_rslvr_input_spec_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_term_rslvr_attr_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_term_rslvr_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_term_spec_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_prop_parm_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_cmpnd_prop_props_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_agenda_attr_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_cntxt_vld_actn_typ_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_cntxt_vld_agenda_typ_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_cntxt_attr_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_rule_attr_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		update krms_agenda_itm_t set when_true=null
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		update krms_agenda_itm_t set when_false=null
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		update krms_agenda_itm_t set always=null
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_agenda_itm_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_actn_attr_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_actn_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_typ_attr_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_attr_defn_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_agenda_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		update krms_rule_t set prop_id=null
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_prop_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_rule_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_typ_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from  krms_cntxt_t
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		delete from krcr_nmspc_t where obj_id = '5a83c912-94b9-4b4d-ac3f-88c53380a4a3'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		--
		-- Copyright 2005-2012 The Kuali Foundation
		--
		--
		
		-- Notification PeopleFlowActionType
		
		insert into krms_typ_t
		(typ_id, nm, nmspc_cd, srvc_nm, actv, ver_nbr)
		values ('1000', 'Notify PeopleFlow', 'KR-RULE', 'notificationPeopleFlowActionTypeService', 'Y', 1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		-- Approval PeopleFlowActionType
		
		insert into krms_typ_t
		(typ_id, nm, nmspc_cd, srvc_nm, actv, ver_nbr)
		values ('1001', 'Route to PeopleFlow', 'KR-RULE', 'approvalPeopleFlowActionTypeService', 'Y', 1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		-- add a PeopleFlow attribute to the PeopleFlow types
		insert into krms_attr_defn_t (ATTR_DEFN_ID, NM, NMSPC_CD, LBL, CMPNT_NM, DESC_TXT)
		values ('1000', 'peopleFlowId', 'KR-RULE', 'PeopleFlow', null,
		'An identifier for a PeopleFlow')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		insert into krms_typ_attr_t (TYP_ATTR_ID, SEQ_NO, TYP_ID, ATTR_DEFN_ID) values ('1000', 1, '1000', '1000')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		insert into krms_typ_attr_t (TYP_ATTR_ID, SEQ_NO, TYP_ID, ATTR_DEFN_ID) values ('1001', 1, '1001', '1000')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		-- General validation rule type
		insert into krms_typ_t (typ_id, nm, nmspc_cd, srvc_nm, actv, ver_nbr) values('1002', 'Validation Rule', 'KR-RULE', 'validationRuleTypeService', 'Y', 1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		-- General validation action type
		insert into krms_typ_t (typ_id, nm, nmspc_cd, srvc_nm, actv, ver_nbr) values('1003', 'Validation Action', 'KR-RULE', 'validationActionTypeService', 'Y', 1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		-- Invalid rule
		insert into krms_attr_defn_t (attr_defn_id, nm, nmspc_cd, lbl, actv, cmpnt_nm, ver_nbr, desc_txt) values ('1001', 'Invalid Rule', 'KR-RULE', 'Invalid Rule', 'Y', null, 1, 'If true, execute the action')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		-- Valid rule
		insert into krms_attr_defn_t (attr_defn_id, nm, nmspc_cd, lbl, actv, cmpnt_nm, ver_nbr, desc_txt) values ('1002', 'Valid Rule', 'KR-RULE', 'Valid Rule', 'Y', null, 1, 'If false, execute the action')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		-- warning action
		insert into krms_attr_defn_t (attr_defn_id, nm, nmspc_cd, lbl, actv, cmpnt_nm, ver_nbr, desc_txt) values ('1003', 'Warning Action', 'KR-RULE', 'Warning Action', 'Y', null, 1, 'Warning')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		-- error action
		insert into krms_attr_defn_t (attr_defn_id, nm, nmspc_cd, lbl, actv, cmpnt_nm, ver_nbr, desc_txt) values ('1004', 'Error Action', 'KR-RULE', 'Error Action', 'Y', null, 1, 'Error')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		-- action message
		insert into krms_attr_defn_t (attr_defn_id, nm, nmspc_cd, lbl, actv, cmpnt_nm, ver_nbr, desc_txt) values ('1005', 'Action Message', 'KR-RULE', 'Action Message', 'Y', null, 1, 'Message validation action returns')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		-- The General action type attribute
		insert into krms_typ_attr_t (typ_attr_id, seq_no, typ_id, attr_defn_id, actv, ver_nbr) values ('1004', 1, '1003', '1003', 'Y', 1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		insert into krms_typ_attr_t (typ_attr_id, seq_no, typ_id, attr_defn_id, actv, ver_nbr) values ('1005', 2, '1003', '1004', 'Y', 1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		insert into krms_typ_attr_t (typ_attr_id, seq_no, typ_id, attr_defn_id, actv, ver_nbr) values ('1006', 3, '1003', '1005', 'Y', 1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		-- change permisison to use new krms test namespace
		update krim_perm_attr_data_t set attr_val = 'KR-RULE-TEST' where attr_val = 'KRMS_TEST'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		update krim_perm_t
		   set nmspc_cd = 'KR-RULE-TEST'
		 where nm = 'Maintain KRMS Agenda'
		   and nmspc_cd = 'KR-RULE'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		update krim_perm_t
		   set nmspc_cd = 'KR-RULE-TEST'
		 where nm = 'Maintain KRMS Agenda'
		   and nmspc_cd = 'KRMS_TEST'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		delete from krim_perm_attr_data_t
		 where perm_id = (select perm_id from krim_perm_t where nm = 'Maintain KRMS Agenda' and nmspc_cd = 'KRMS_TEST')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2012-01-19c.sql
		-- 
		
		
		-- KULRICE-6537 - increase size of MBR_NM field
		ALTER TABLE KRIM_PND_GRP_MBR_T MODIFY (MBR_NM varchar2(100))
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		
		
		
		-- 
		-- 2012-01-19.sql
		-- 
		
		
		CREATE TABLE KRCR_STYLE_T
		(
		      STYLE_ID VARCHAR2(40)
		        , NM VARCHAR2(200) NOT NULL
		        , XML CLOB NOT NULL
		        , ACTV_IND NUMBER(1) NOT NULL
		        , VER_NBR NUMBER(8) default 0
		        , OBJ_ID VARCHAR2(36) NOT NULL
		    , CONSTRAINT KRCR_STYLE_TC0 UNIQUE (OBJ_ID)
		)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		INSERT INTO KRCR_STYLE_T SELECT STYLE_ID, NM, XML, ACTV_IND, VER_NBR, OBJ_ID FROM KREW_STYLE_T
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		ALTER TABLE KREW_STYLE_T RENAME TO OLD_KREW_STYLE_T 
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		ALTER TABLE KRCR_STYLE_T
		    ADD CONSTRAINT KRCR_STYLE_TP1
		PRIMARY KEY (STYLE_ID)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		--
		-- 2012-01-24.sql
		--
		
		
		-- unset type on My Fabulous Agenda since the required attribute isn't specified
		UPDATE krms_agenda_t SET TYP_ID=null WHERE AGENDA_ID='T1000'
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		-- PeopleFlow Name
		insert into krms_attr_defn_t (attr_defn_id, nm, nmspc_cd, lbl, actv, cmpnt_nm, ver_nbr, desc_txt)
		values ('1006', 'peopleFlowName', 'KR_RULE', 'PeopleFlow Name', 'Y', null, 1, 'PeopleFlow Name')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		insert into krms_typ_attr_t (typ_attr_id, seq_no, typ_id, attr_defn_id, actv, ver_nbr)
		values ('1007', 3, '1000', '1006', 'Y', 1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		insert into krms_typ_attr_t (typ_attr_id, seq_no, typ_id, attr_defn_id, actv, ver_nbr)
		values ('1008', 3, '1001', '1006', 'Y', 1)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		
		--
		-- 2010-01-31.sql
		--
		
		
		-- KULRICE-6481
		ALTER TABLE KRIM_ROLE_PERM_T MODIFY (ROLE_ID NOT NULL)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		ALTER TABLE KRIM_ROLE_PERM_T MODIFY (PERM_ID NOT NULL)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		insert into krim_perm_t
		(perm_id, perm_tmpl_id, nmspc_cd, nm, desc_txt, actv_ind, ver_nbr, obj_id)
		values ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_id, '[^0-9]', ''))) + 1) from krim_perm_t where perm_id is not NULL and REGEXP_LIKE(perm_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_id, '[^0-9]', '')) < 10000),
		        (select perm_tmpl_id from krim_perm_tmpl_t where nm = 'Create / Maintain Record(s)' and nmspc_cd = 'KR-NS'),
		        'KR-NS','Create Term Maintenance Document','Allows user to create a new Term maintainence document','Y',1,
		        '0dbce939-4f22-4e9b-a4bb-1615c0f411a2')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		insert into krim_perm_attr_data_t
		(attr_data_id, perm_id, kim_typ_id, kim_attr_defn_id, attr_val, ver_nbr, obj_id)
		values ((select (max(TO_NUMBER(REGEXP_REPLACE(attr_data_id, '[^0-9]', ''))) + 1) from krim_perm_attr_data_t where attr_data_id is not NULL and REGEXP_LIKE(attr_data_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(attr_data_id, '[^0-9]', '')) < 10000),
		        (select perm_id from krim_perm_t where nm = 'Create Term Maintenance Document' and nmspc_cd = 'KR-NS'),
		        (select kim_typ_id from krim_typ_t where nm = 'Document Type & Existing Records Only' and nmspc_cd = 'KR-NS'),
		        (select kim_attr_defn_id from krim_attr_defn_t where nm = 'documentTypeName'),
		        'TermMaintenanceDocument',1,'aa1d1400-6155-4819-8bad-e5dd81f9871b')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		insert into krim_role_perm_t
		(role_perm_id, role_id, perm_id, actv_ind, ver_nbr, obj_id)
		values ((select (max(TO_NUMBER(REGEXP_REPLACE(role_perm_id, '[^0-9]', ''))) + 1) from krim_role_perm_t where role_perm_id is not NULL and REGEXP_LIKE(role_perm_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(role_perm_id, '[^0-9]', '')) < 10000),
		        (select role_id from krim_role_t where role_nm = 'Kuali Rules Management System Administrator' and nmspc_cd = 'KR-RULE'),
		        (select perm_id from krim_perm_t where nm = 'Create Term Maintenance Document' and nmspc_cd = 'KR-NS'),
		        'Y', 1, '45f8f55e-23d9-4278-ade8-ddfc870852e6')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		insert into krim_perm_t
		(perm_id, perm_tmpl_id, nmspc_cd, nm, desc_txt, actv_ind, ver_nbr, obj_id)
		values ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_id, '[^0-9]', ''))) + 1) from krim_perm_t where perm_id is not NULL and REGEXP_LIKE(perm_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_id, '[^0-9]', '')) < 10000),
		        (select perm_tmpl_id from krim_perm_tmpl_t where nm = 'Create / Maintain Record(s)' and nmspc_cd = 'KR-NS'),
		        'KR-NS','Create Context Maintenance Document','Allows user to create a new Context maintainence document','Y',1,
		        'cefeed6d-b5e2-40aa-9034-137db317b532')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		insert into krim_perm_attr_data_t
		(attr_data_id, perm_id, kim_typ_id, kim_attr_defn_id, attr_val, ver_nbr, obj_id)
		values ((select (max(TO_NUMBER(REGEXP_REPLACE(attr_data_id, '[^0-9]', ''))) + 1) from krim_perm_attr_data_t where attr_data_id is not NULL and REGEXP_LIKE(attr_data_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(attr_data_id, '[^0-9]', '')) < 10000),
		        (select perm_id from krim_perm_t where nm = 'Create Context Maintenance Document' and nmspc_cd = 'KR-NS'),
		        (select kim_typ_id from krim_typ_t where nm = 'Document Type & Existing Records Only' and nmspc_cd = 'KR-NS'),
		        (select kim_attr_defn_id from krim_attr_defn_t where nm = 'documentTypeName'),
		        'ContextMaintenanceDocument',1,'c43bc7f5-949e-4a85-b173-6a53d81f2762')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		insert into krim_role_perm_t
		(role_perm_id, role_id, perm_id, actv_ind, ver_nbr, obj_id)
		values ((select (max(TO_NUMBER(REGEXP_REPLACE(role_perm_id, '[^0-9]', ''))) + 1) from krim_role_perm_t where role_perm_id is not NULL and REGEXP_LIKE(role_perm_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(role_perm_id, '[^0-9]', '')) < 10000),
		        (select role_id from krim_role_t where role_nm = 'Kuali Rules Management System Administrator' and nmspc_cd = 'KR-RULE'),
		        (select perm_id from krim_perm_t where nm = 'Create Context Maintenance Document' and nmspc_cd = 'KR-NS'),
		        'Y', 1, 'cd7cbc67-c0b2-4785-afa8-8c8d073b78df')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		insert into krim_perm_t
		(perm_id, perm_tmpl_id, nmspc_cd, nm, desc_txt, actv_ind, ver_nbr, obj_id)
		values ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_id, '[^0-9]', ''))) + 1) from krim_perm_t where perm_id is not NULL and REGEXP_LIKE(perm_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_id, '[^0-9]', '')) < 10000),
		        (select perm_tmpl_id from krim_perm_tmpl_t where nm = 'Create / Maintain Record(s)' and nmspc_cd = 'KR-NS'),
		        'KR-NS','Create TermSpecification Maintenance Document','Allows user to create a new TermSpecification maintainence document','Y',1,
		        '02bd9acd-48d9-4fec-acbd-6a441c5ea8c2')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		insert into krim_perm_attr_data_t
		(attr_data_id, perm_id, kim_typ_id, kim_attr_defn_id, attr_val, ver_nbr, obj_id)
		values ((select (max(TO_NUMBER(REGEXP_REPLACE(attr_data_id, '[^0-9]', ''))) + 1) from krim_perm_attr_data_t where attr_data_id is not NULL and REGEXP_LIKE(attr_data_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(attr_data_id, '[^0-9]', '')) < 10000),
		        (select perm_id from krim_perm_t where nm = 'Create TermSpecification Maintenance Document' and nmspc_cd = 'KR-NS'),
		        (select kim_typ_id from krim_typ_t where nm = 'Document Type & Existing Records Only' and nmspc_cd = 'KR-NS'),
		        (select kim_attr_defn_id from krim_attr_defn_t where nm = 'documentTypeName'),
		        'TermSpecificationMaintenanceDocument',1,'d3e373ca-296b-4834-bd66-ba159ebe733a')
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		insert into krim_role_perm_t
		(role_perm_id, role_id, perm_id, actv_ind, ver_nbr, obj_id)
		values ((select (max(TO_NUMBER(REGEXP_REPLACE(role_perm_id, '[^0-9]', ''))) + 1) from krim_role_perm_t where role_perm_id is not NULL and REGEXP_LIKE(role_perm_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(role_perm_id, '[^0-9]', '')) < 10000),
		        (select role_id from krim_role_t where role_nm = 'Kuali Rules Management System Administrator' and nmspc_cd = 'KR-RULE'),
		        (select perm_id from krim_perm_t where nm = 'Create TermSpecification Maintenance Document' and nmspc_cd = 'KR-NS'),
		        'Y', 1, '83a270a0-1cdb-4440-ab8b-41cd8afc41d9')
		]]></sql>

		<sql splitStatements="false"><![CDATA[
		
		--
		-- KULRICE-6799: At one point (2.0-RC4 and before), the DOC_STAT_NM column was incorrectly set to 20 characters
		--               the original script (2011-06-17.sql, and the "final" script) has been corrected, but this script has
		--               been created in case that script had already been run.  Mysql scripts are unaffected by this, so there is no
		--               equivalent mysql script.
		--
		
		alter table KREW_DOC_TYP_APP_DOC_STAT_T modify (DOC_STAT_NM varchar2(64))
		]]></sql>
		<sql splitStatements="false"><![CDATA[
		
		--
		-- 2012-02-23.sql
		--
		
		--
		-- KULRICE-6811: Conversion of WorkflowFunctions to EDLFunctions in eDocLite stylesheets
		--
		
		UPDATE KRCR_STYLE_T set XML=replace(XML,'org.kuali.rice.kew.edl.WorkflowFunctions','org.kuali.rice.edl.framework.util.EDLFunctions')
		]]></sql>

		<sql splitStatements="false"><![CDATA[
		
		-----------------------------------------------------------------------------
		-- FOREIGN KEY CONSTRAINTS IMPACTED BY CHANGES
		-----------------------------------------------------------------------------
		ALTER TABLE KREW_RULE_T
		    ADD CONSTRAINT KREW_RULE_TR1 FOREIGN KEY (RULE_EXPR_ID)
		    REFERENCES KREW_RULE_EXPR_T (RULE_EXPR_ID)
		]]></sql>
		<sql splitStatements="false"><![CDATA[
			CREATE INDEX KRNS_NTE_TI1 ON KRNS_NTE_T ( RMT_OBJ_ID )
		]]></sql>
	</changeSet>
        <!--
	<changeSet author="RICE20" id="RICE_SERVER_UPDATES_mysql" dbms="mysql">
		<sqlFile path="rice_20_final_mysql.sql" />
	</changeSet>
-->

<changeSet author="RICE21" id="2012-02-27_oracle" dbms="oracle">
	<sql><![CDATA[
ALTER TABLE
  KRIM_GRP_MBR_T
MODIFY
   (
    MBR_ID VARCHAR2(40) NOT NULL,
    GRP_ID VARCHAR2(40) NOT NULL,
    MBR_TYP_CD CHAR(1) NOT NULL
   );

ALTER TABLE
   KRIM_ROLE_MBR_T
MODIFY
   (
    MBR_ID VARCHAR2(40) NOT NULL,
    ROLE_ID VARCHAR2(40) NOT NULL,
    MBR_TYP_CD CHAR(1) NOT NULL
   );
	]]></sql>
</changeSet>
<changeSet author="RICE21" id="2012-03-05_oracle" dbms="oracle">
	<sql><![CDATA[
UPDATE KREW_DOC_TYP_T SET LBL = 'Undefined' WHERE LBL is null;
ALTER TABLE KREW_DOC_TYP_T MODIFY (LBL NOT NULL);
	]]></sql>
</changeSet>
<changeSet author="RICE21" id="2012-03-13_oracle" dbms="oracle">
	<sql><![CDATA[
		ALTER TABLE krim_entity_cache_t MODIFY (PRSN_NM VARCHAR2(255))		
	]]></sql>
</changeSet>
<changeSet author="RICE21" id="2012-03-20_oracle" dbms="oracle">
	<sql><![CDATA[
		ALTER TABLE krew_doc_typ_plcy_reln_t MODIFY (PLCY_VAL VARCHAR2(1024))
	]]></sql>
</changeSet>

<changeSet author="RICE21" id="2012-03-28_oracle" dbms="oracle">
	<sql><![CDATA[
-- add 'appDocStatus' attr definition
INSERT INTO KRIM_ATTR_DEFN_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_ATTR_DEFN_ID, '[^0-9]', ''))) + 1) from KRIM_ATTR_DEFN_T where KIM_ATTR_DEFN_ID is not NULL and REGEXP_LIKE(KIM_ATTR_DEFN_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_ATTR_DEFN_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'appDocStatus', null, 'Y', 'KR-WKFLW', 'org.kuali.rice.kim.bo.impl.KimAttributes')
;

-- assign it to 'Document Type & Routing Node or State' type
INSERT INTO KRIM_TYP_ATTR_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_ATTR_T where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'a', (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-SYS' and NM='Document Type & Routing Node or State'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD='KR-WKFLW' and NM='appDocStatus'), 'Y')
;

-- create Recall permission template
INSERT INTO KRIM_PERM_TMPL_T VALUES ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', ''))) + 1) from krim_perm_tmpl_t where perm_tmpl_id is not NULL and REGEXP_LIKE(perm_tmpl_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_tmpl_id, '[^0-9]', '')) < 10000), sys_guid(), 1, 'KR-WKFLW', 'Recall Document', null, (select kim_typ_id from krim_typ_t where NMSPC_CD='KR-SYS' and NM='Document Type & Routing Node or State'), 'Y')
	]]></sql>
</changeSet>

<changeSet author="RICE21" id="2012-04-04_oracle" dbms="oracle">
	<sql><![CDATA[
	alter table KREW_RULE_ATTR_T add constraint KREW_RULE_ATTR_TC1 unique(NM)
	]]></sql>
</changeSet>

<changeSet author="RICE21" id="2012-04-11_oracle" dbms="oracle">
	<sql><![CDATA[
-- insert Recall permission for initiators
INSERT INTO KRIM_PERM_T (PERM_ID, OBJ_ID, VER_NBR, PERM_TMPL_ID, NMSPC_CD, NM) values ((select (max(TO_NUMBER(REGEXP_REPLACE(PERM_ID, '[^0-9]', ''))) + 1) from KRIM_PERM_T where PERM_ID is not NULL and REGEXP_LIKE(PERM_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(PERM_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, (select PERM_TMPL_ID from KRIM_PERM_TMPL_T where NMSPC_CD = 'KR-WKFLW' and NM = 'Recall Document'), 'KR-WKFLW', 'Recall Document')
;
-- define document type wildcard for permission
INSERT INTO KRIM_PERM_ATTR_DATA_T (ATTR_DATA_ID, OBJ_ID, VER_NBR, PERM_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL) values ((select (max(TO_NUMBER(REGEXP_REPLACE(ATTR_DATA_ID, '[^0-9]', ''))) + 1) from KRIM_PERM_ATTR_DATA_T where ATTR_DATA_ID is not NULL and REGEXP_LIKE(ATTR_DATA_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(ATTR_DATA_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, (select PERM_ID from KRIM_PERM_T where NMSPC_CD = 'KR-WKFLW' and NM='Recall Document'), (select KIM_TYP_ID from KRIM_PERM_TMPL_T where NMSPC_CD = 'KR-WKFLW' and NM = 'Recall Document'), (select KIM_ATTR_DEFN_ID from KRIM_ATTR_DEFN_T where NMSPC_CD = 'KR-WKFLW' and NM = 'documentTypeName'), '*')
;
-- associate Recall permission with initiator derived role
INSERT INTO KRIM_ROLE_PERM_T (ROLE_PERM_ID, OBJ_ID, VER_NBR, ROLE_ID, PERM_ID, ACTV_IND) values ((select (max(TO_NUMBER(REGEXP_REPLACE(ROLE_PERM_ID, '[^0-9]', ''))) + 1) from KRIM_ROLE_PERM_T where ROLE_PERM_ID is not NULL and REGEXP_LIKE(ROLE_PERM_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(ROLE_PERM_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, (select ROLE_ID from KRIM_ROLE_T where ROLE_NM = 'Initiator' and NMSPC_CD = 'KR-WKFLW'), (select PERM_ID from KRIM_PERM_T where NMSPC_CD = 'KR-WKFLW' and NM='Recall Document'), 'Y')
;
	]]></sql>
</changeSet>


<changeSet author="RICE21" id="2012-04-12_oracle" dbms="oracle">
	<sql><![CDATA[
-- create a Kim Type wired to the documentRouterRoleTypeService permission-derived role service
INSERT INTO KRIM_TYP_T (KIM_TYP_ID, OBJ_ID, VER_NBR, NM, SRVC_NM, ACTV_IND, NMSPC_CD) values ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ID, '[^0-9]', ''))) + 1) from KRIM_TYP_T where KIM_TYP_ID is not NULL and REGEXP_LIKE(KIM_TYP_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'Derived Role: Permission (Route Document)', 'documentRouterRoleTypeService', 'Y', 'KR-WKFLW')
;
-- define the Route Document derived role
INSERT INTO KRIM_ROLE_T (ROLE_ID, OBJ_ID, VER_NBR, ROLE_NM, NMSPC_CD, DESC_TXT, KIM_TYP_ID, ACTV_IND) values ((select (max(TO_NUMBER(REGEXP_REPLACE(ROLE_ID, '[^0-9]', ''))) + 1) from KRIM_ROLE_T where ROLE_ID is not NULL and REGEXP_LIKE(ROLE_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(ROLE_ID, '[^0-9]', '')) < 10000), sys_guid(), 1, 'Document Router', 'KR-WKFLW', 'This role derives its members from users with the Route Document permission for a given document type.', (select KIM_TYP_ID from KRIM_TYP_T where NM = 'Derived Role: Permission (Route Document)' and NMSPC_CD = 'KR-WKFLW'), 'Y')
;
	]]></sql>
</changeSet>

<changeSet author="RICE21" id="2012-04-16_oracle" dbms="oracle">
	<sql><![CDATA[
-- KULRICE-7128 wire kim type attribute 'qualifierResolverProvidedIdentifier' to Responsibility type
Insert into krim_typ_attr_t
(KIM_TYP_ATTR_ID,
OBJ_ID,
VER_NBR,
SORT_CD,
KIM_TYP_ID,
KIM_ATTR_DEFN_ID,
ACTV_IND)
VALUES
  ((select (max(TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', ''))) + 1) from  krim_typ_attr_t where KIM_TYP_ATTR_ID is not NULL and REGEXP_LIKE(KIM_TYP_ATTR_ID, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(KIM_TYP_ATTR_ID, '[^0-9]', '')) < 10000),
  '69FA55ACC2EE2598E0404F8189D86880',
  1,
  'e',
  7,
  46,
  'Y')
	]]></sql>
</changeSet>

<changeSet author="RICE21" id="2012-04-19_oracle" dbms="oracle">
	<sql><![CDATA[
CREATE TABLE KRNS_MAINT_DOC_ATT_LST_T  (
    ATT_ID      VARCHAR2(40) NOT NULL,
	DOC_HDR_ID	VARCHAR2(14) NOT NULL,
	ATT_CNTNT 	blob NOT NULL,
	FILE_NM   	VARCHAR2(150) NULL,
	CNTNT_TYP 	VARCHAR2(255) NULL,
	OBJ_ID    	VARCHAR2(36) NOT NULL,
	VER_NBR   	NUMBER(8) DEFAULT 0 NOT NULL,
	PRIMARY KEY(ATT_ID),
	CONSTRAINT KRNS_MAINT_DOC_ATT_LST_FK1 foreign key (DOC_HDR_ID) references KRNS_MAINT_DOC_T (DOC_HDR_ID)
)
;
ALTER TABLE KRNS_MAINT_DOC_ATT_LST_T
	ADD CONSTRAINT KRNS_MAINT_DOC_ATT_LST_TC0
	UNIQUE (OBJ_ID)
;
CREATE INDEX KRNS_MAINT_DOC_ATT_LST_TI1 on KRNS_MAINT_DOC_ATT_LST_T (DOC_HDR_ID)
;
CREATE SEQUENCE KRNS_MAINT_DOC_ATT_S INCREMENT BY 1 START WITH 10000 NOMAXVALUE NOCYCLE NOCACHE ORDER;
	]]></sql>
</changeSet>
<changeSet author="RICE21" id="2012-04-25_oracle" dbms="oracle">
	<sql><![CDATA[
update krms_attr_defn_t set nm='actionTypeCode' where attr_defn_id='1004'
;
update krms_attr_defn_t set nm='actionMessage' where attr_defn_id='1005'
;
update krms_attr_defn_t set nm='ruleTypeCode' where attr_defn_id='1001'
;

delete from krms_typ_attr_t where ATTR_DEFN_ID = '1002'
;
delete from krms_typ_attr_t where ATTR_DEFN_ID = '1003'
;
delete from krms_attr_defn_t where ATTR_DEFN_ID = '1002'
;
delete from krms_attr_defn_t where ATTR_DEFN_ID = '1003'
;
	]]></sql>
</changeSet>

<changeSet author="RICE21" id="2012-05-11_oracle" dbms="oracle">
	<sql><![CDATA[
insert into krim_perm_t
(perm_id, perm_tmpl_id, nmspc_cd, nm, desc_txt, actv_ind, ver_nbr, obj_id)
values ((select (max(TO_NUMBER(REGEXP_REPLACE(perm_id, '[^0-9]', ''))) + 1) from krim_perm_t where perm_id is not NULL and REGEXP_LIKE(perm_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(perm_id, '[^0-9]', '')) < 10000),
        (select perm_tmpl_id from krim_perm_tmpl_t where nm = 'Send Ad Hoc Request' and nmspc_cd = 'KR-NS'),
        'KR-SYS','Send Complete Request Kuali Document','Authorizes users to send Complete ad hoc requests for Kuali Documents','Y',1,sys_guid())
;

insert into krim_perm_attr_data_t
(attr_data_id, perm_id, kim_typ_id, kim_attr_defn_id, attr_val, ver_nbr, obj_id)
values ((select (max(TO_NUMBER(REGEXP_REPLACE(attr_data_id, '[^0-9]', ''))) + 1) from krim_perm_attr_data_t where attr_data_id is not NULL and REGEXP_LIKE(attr_data_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(attr_data_id, '[^0-9]', '')) < 10000),
        (select perm_id from krim_perm_t where nm = 'Send Complete Request Kuali Document' and nmspc_cd = 'KR-SYS'),
        (select kim_typ_id from krim_typ_t where nm = 'Ad Hoc Review' and nmspc_cd = 'KR-WKFLW'),
        (select kim_attr_defn_id from krim_attr_defn_t where nm = 'documentTypeName'), 'KualiDocument',1,sys_guid())
;


insert into krim_perm_attr_data_t
(attr_data_id, perm_id, kim_typ_id, kim_attr_defn_id, attr_val, ver_nbr, obj_id)
values ((select (max(TO_NUMBER(REGEXP_REPLACE(attr_data_id, '[^0-9]', ''))) + 1) from krim_perm_attr_data_t where attr_data_id is not NULL and REGEXP_LIKE(attr_data_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(attr_data_id, '[^0-9]', '')) < 10000),
        (select perm_id from krim_perm_t where nm = 'Send Complete Request Kuali Document' and nmspc_cd = 'KR-SYS'),
        (select kim_typ_id from krim_typ_t where nm = 'Ad Hoc Review' and nmspc_cd = 'KR-WKFLW'),
        (select kim_attr_defn_id from krim_attr_defn_t where nm = 'actionRequestCd'), 'C',1,sys_guid())
;

insert into krim_role_perm_t
(role_perm_id, role_id, perm_id, actv_ind, ver_nbr, obj_id)
values ((select (max(TO_NUMBER(REGEXP_REPLACE(role_perm_id, '[^0-9]', ''))) + 1) from krim_role_perm_t where role_perm_id is not NULL and REGEXP_LIKE(role_perm_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(role_perm_id, '[^0-9]', '')) < 10000),
        (select role_id from krim_role_t where role_nm = 'Document Opener' and nmspc_cd = 'KR-NS'),
        (select perm_id from krim_perm_t where nm = 'Send Complete Request Kuali Document' and nmspc_cd = 'KR-SYS'),
        'Y', 1, sys_guid())
;

--insert into krim_role_perm_t
--(role_perm_id, role_id, perm_id, actv_ind, ver_nbr, obj_id)
--values ((select (max(TO_NUMBER(REGEXP_REPLACE(role_perm_id, '[^0-9]', ''))) + 1) from krim_role_perm_t where role_perm_id is not NULL and REGEXP_LIKE(role_perm_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(role_perm_id, '[^0-9]', '')) < 10000),
--        (select role_id from krim_role_t where role_nm = 'Initiator or Reviewer' and nmspc_cd = 'KR-WKFLW'),
--        (select perm_id from krim_perm_t where nm = 'Edit Kuali ENROUTE Document Route Status Code R' and nmspc_cd = 'KUALI'),
--        'Y', 1, sys_guid())
--

insert into krim_role_perm_t
(role_perm_id, role_id, perm_id, actv_ind, ver_nbr, obj_id)
values ((select (max(TO_NUMBER(REGEXP_REPLACE(role_perm_id, '[^0-9]', ''))) + 1) from krim_role_perm_t where role_perm_id is not NULL and REGEXP_LIKE(role_perm_id, '^[1-9][0-9]*$') and TO_NUMBER(REGEXP_REPLACE(role_perm_id, '[^0-9]', '')) < 10000),
        (select role_id from krim_role_t where role_nm = 'Initiator or Reviewer' and nmspc_cd = 'KR-WKFLW'),
        (select perm_id from krim_perm_t where nm = 'Cancel Document' and nmspc_cd = 'KUALI'),
        'Y', 1, sys_guid())
;
	]]></sql>
</changeSet>

<changeSet author="RICE21" id="2012-05-21_oracle" dbms="oracle">
	<sql><![CDATA[
	update krim_perm_attr_data_t set ATTR_VAL='org.kuali.rice.core.web.impex.IngesterAction' where ATTR_VAL='org.kuali.rice.kew.batch.web.IngesterAction'	
	]]></sql>
</changeSet>
<!--
	<changeSet author="RICE21" id="RICE_SERVER_UPDATES_mysql" dbms="mysql">
		<sqlFile path="rice_21_final_mysql.sql" />
	</changeSet>
-->

</databaseChangeLog>
	
